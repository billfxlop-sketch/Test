# MAUT PANEL PRO EDITION - PORTS CONFIGURATION
# Owner: @maut_coder
# Powered by MAUT CODER
#
# This file defines the ports used by various services in MAUT Panel Pro.
# Change these ports if you need to avoid conflicts or for security reasons.
#
# WARNING: Changing ports may require firewall updates and client reconfiguration.
#

# =============================================================================
# SYSTEM PORTS
# =============================================================================

# SSH service port (default: 22)
# Change this for security through obscurity
SSH_PORT=22

# SFTP port (uses SSH port)
SFTP_PORT=22

# =============================================================================
# XRAY CORE PORTS
# =============================================================================

# VMESS protocol port (default: 8443)
# Used for VMESS over TCP/TLS
VMESS_PORT=8443

# VLESS protocol port (default: 2083)
# Used for VLESS over TCP/TLS with XTLS
VLESS_PORT=2083

# Trojan protocol port (default: 2087)
# Used for Trojan over TCP/TLS
TROJAN_PORT=2087

# Shadowsocks protocol port (default: 8444)
# Used for Shadowsocks with various encryption methods
SHADOWSOCKS_PORT=8444

# =============================================================================
# WEBSOCKET PORTS
# =============================================================================

# WebSocket backend port (default: 10000)
# Internal port for WebSocket connections
WS_BACKEND_PORT=10000

# WebSocket fallback port (default: 10001)
# Alternate port for WebSocket connections
WS_FALLBACK_PORT=10001

# =============================================================================
# WEB SERVICE PORTS
# =============================================================================

# Panel web interface port (default: 8080)
# Access the panel via http://your-server:8080
PANEL_WEB_PORT=8080

# Panel HTTPS port (default: 8443)
# Secure access to panel (if SSL configured)
PANEL_HTTPS_PORT=8443

# Nginx status port (default: 8081)
# For monitoring Nginx status
NGINX_STATUS_PORT=8081

# =============================================================================
# MONITORING PORTS
# =============================================================================

# Speedtest server port (default: 8082)
# For internal speed testing
SPEEDTEST_PORT=8082

# Monitoring API port (default: 8083)
# For system monitoring and metrics
MONITORING_PORT=8083

# Health check port (default: 8084)
# For service health checks
HEALTH_CHECK_PORT=8084

# =============================================================================
# BACKUP PORTS
# =============================================================================

# Backup service port (default: 8085)
# For remote backup operations
BACKUP_SERVICE_PORT=8085

# File transfer port (default: 8086)
# For secure file transfers
FILE_TRANSFER_PORT=8086

# =============================================================================
# ADVANCED PORTS
# =============================================================================

# API gateway port (default: 8087)
# For panel API access
API_GATEWAY_PORT=8087

# Database access port (default: 8088)
# For database connections (if used)
DATABASE_PORT=8088

# Cache service port (default: 8089)
# For caching service (if implemented)
CACHE_SERVICE_PORT=8089

# =============================================================================
# FALLBACK PORTS
# =============================================================================

# Fallback VMESS port (default: 8444)
VMESS_FALLBACK_PORT=8444

# Fallback VLESS port (default: 2084)
VLESS_FALLBACK_PORT=2084

# Fallback Trojan port (default: 2088)
TROJAN_FALLBACK_PORT=2088

# Fallback Shadowsocks port (default: 8445)
SHADOWSOCKS_FALLBACK_PORT=8445

# =============================================================================
# PORT RANGES FOR AUTO-ASSIGNMENT
# =============================================================================

# Auto-assign port range start (default: 20000)
AUTO_PORT_START=20000

# Auto-assign port range end (default: 30000)
AUTO_PORT_END=30000

# Next available auto port (auto-incremented)
NEXT_AUTO_PORT=20000

# =============================================================================
# SECURITY PORTS
# =============================================================================

# Fail2ban admin port (default: 8080)
FAIL2BAN_PORT=8080

# Firewall admin port (default: 8081)
FIREWALL_ADMIN_PORT=8081

# Security monitoring port (default: 8082)
SECURITY_MONITOR_PORT=8082

# =============================================================================
# PORT ALLOCATION TABLE
# =============================================================================
# This section tracks port usage for auto-allocation
# Format: service|username|port|protocol|status

PORT_ALLOCATIONS=(
    "ssh|admin|22|tcp|active"
    "vmess|vm_user1|8443|tcp|active"
    "vmess|vm_user2|8443|tcp|active"
    "vmess|premium_user|8443|tcp|active"
    "vless|vl_user1|2083|tcp|active"
    "vless|vl_user2|2083|tcp|active"
    "vless|stream_user|2083|tcp|active"
    "trojan|tj_user1|2087|tcp|active"
    "trojan|tj_user2|2087|tcp|active"
    "trojan|fast_user|2087|tcp|active"
    "shadowsocks|ss_user1|8444|tcp,udp|active"
    "shadowsocks|ss_user2|8444|tcp,udp|active"
    "shadowsocks|ss_user3|8444|tcp,udp|active"
    "websocket|default|10000|tcp|active"
    "panel|web_interface|8080|tcp|active"
)

# =============================================================================
# FIREWALL CONFIGURATION
# =============================================================================

# Ports to always keep open
ESSENTIAL_PORTS=(
    "22"    # SSH
    "80"    # HTTP
    "443"   # HTTPS
)

# Ports to open for services
SERVICE_PORTS=(
    "8443"  # VMESS
    "2083"  # VLESS
    "2087"  # TROJAN
    "8444"  # Shadowsocks
    "10000" # WebSocket
    "8080"  # Panel
)

# Ports to open for monitoring
MONITORING_PORTS=(
    "8081"  # Nginx status
    "8082"  # Speedtest
    "8083"  # Monitoring
    "8084"  # Health check
)

# Ports to block (security)
BLOCKED_PORTS=(
    "23"    # Telnet
    "135"   # RPC
    "137"   # NetBIOS
    "138"   # NetBIOS
    "139"   # NetBIOS
    "445"   # SMB
    "1433"  # MSSQL
    "1434"  # MSSQL
    "3306"  # MySQL
    "3389"  # RDP
    "5432"  # PostgreSQL
)

# =============================================================================
# PORT SCANNING PROTECTION
# =============================================================================

# Enable port knocking (additional security)
PORT_KNOCKING_ENABLED="false"

# Port knocking sequence (3 ports)
KNOCK_SEQUENCE=("7000" "8000" "9000")

# Port knocking timeout (seconds)
KNOCK_TIMEOUT=30

# =============================================================================
# CONFIGURATION METADATA
# =============================================================================

# Configuration version
CONFIG_VERSION="2.1"

# Last configuration update
LAST_UPDATE="2024-01-01 12:00:00"

# Port conflict detection
CONFLICT_DETECTION="enabled"

# Auto-port assignment
AUTO_ASSIGNMENT="enabled"

# Port randomization
PORT_RANDOMIZATION="disabled"

# Configuration checksum
CONFIG_CHECKSUM=""

# =============================================================================
# DIAGNOSTIC PORTS
# =============================================================================

# Ports for diagnostic services
DIAGNOSTIC_PORTS=(
    "8085"  # Backup service
    "8086"  # File transfer
    "8087"  # API gateway
    "8088"  # Database
    "8089"  # Cache service
)

# Port test timeout (seconds)
PORT_TEST_TIMEOUT=5

# Port scan interval (minutes)
PORT_SCAN_INTERVAL=5

# =============================================================================
# BACKUP ORIGINAL PORTS
# =============================================================================
# Original port values for restoration

ORIGINAL_SSH_PORT=22
ORIGINAL_VMESS_PORT=8443
ORIGINAL_VLESS_PORT=2083
ORIGINAL_TROJAN_PORT=2087
ORIGINAL_SHADOWSOCKS_PORT=8444